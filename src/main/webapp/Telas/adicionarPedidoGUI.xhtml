<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/Template/template.xhtml">
        <ui:define name="content">

            <b:jumbotron> 
                <h:panelGroup>
                    <b:form   prependId="false">
                        <b:container fluid="true" >
                            <b:row>

                                <b:selectOneMenu id="tipoPedido"
                                                 value="#{pedidoMB.tipoPedido}" 
                                                 required="true"
                                                 label="Tipo"
                                                 span="2"
                                                 select2="true"
                                                 >
                                    <f:selectItem itemLabel="Tipo de Pedido" />

                                    <f:selectItems value="#{pedidoMB.tipoPedidos}"
                                                   var="tipo" 
                                                   itemLabel="#{tipo.nome}"
                                                   itemValue="#{tipo}"


                                                   />
                                </b:selectOneMenu>



                                <b:selectOneMenu id="cliente"
                                                 value="#{pedidoMB.cliente}" 
                                                 required="true"
                                                 label="Cliente"
                                                 span="10"
                                                 select2="true"
                                                 >
                                    <f:selectItem itemLabel="Selecione um cliente" />
                                    <f:selectItems value="#{pedidoMB.clientes}"
                                                   var="cliente" 
                                                   itemLabel="#{cliente.razaoSocial}"
                                                   itemValue="#{cliente}"

                                                   />
                                </b:selectOneMenu>

                            </b:row>
                            <b:row>
                                <b:column span="2">
                                    <b:message for="tipoPedido"/>
                                </b:column>
                                <b:column span="6">
                                    <b:message for="cliente"/>
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:selectOneMenu id="condpag"
                                                 value="#{pedidoMB.condicaoPagamento}" 
                                                 required="true"
                                                 label="Condição de Pagamento"
                                                 span="2"
                                                 >
                                    <f:selectItem itemLabel="Condição de pagamento" />
                                    <f:selectItems value="#{pedidoMB.condicoes}"
                                                   var="condicao" 
                                                   itemLabel="#{condicao.condicao}"
                                                   itemValue="#{condicao}"
                                                   />
                                </b:selectOneMenu>


                                <b:selectOneMenu id="transportadora"
                                                 value="#{pedidoMB.transportadora}" 
                                                 required="true"
                                                 label="Transportadora"
                                                 span="4"
                                                 >
                                    <f:selectItem itemLabel="Selecione uma Transportadora" />
                                    <f:selectItems value="#{pedidoMB.transportadoras}"
                                                   var="transportadora" 
                                                   itemLabel="#{transportadora.nomeFantasia}"
                                                   itemValue="#{transportadora}"
                                                   />
                                </b:selectOneMenu>



                                <b:inputText span="2" id="ordemCompra" value="#{pedidoMB.pedido.numeroOrdemCompra}" label="Numero da Ordem de Compra" size="30" required="false" />

                                <b:inputText span="4" id="obs" value="#{pedidoMB.pedido.observacoes}" label="Observações" size="100" required="false" />

                            </b:row>
                            <b:row>
                                <b:message for="condpag"/>
                                <b:message for="transportadora"/>
                                <b:message for="ordemCompra"/>
                                <b:message for="obs"/>

                            </b:row>
                        </b:container>


                        <div>
                            <h3>Endereço de Entrega</h3>
                            <b:selectOneMenu id="estado"
                                             value="#{pedidoMB.estado}" 
                                             required="true"
                                             label="Estado"
                                             span="2"
                                             select2="true"
                                             >
                                <f:selectItem itemLabel="Estado" />
                                <f:selectItems value="#{pedidoMB.estados}"
                                               var="estado" 
                                               itemLabel="#{estado.nome}"
                                               itemValue="#{estado}"
                                               />
                            </b:selectOneMenu>
                            <b:message for="@previous" />
                            <b:inputText span="2" value="#{pedidoMB.endereco.cidade}" label="Cidade" size="30" required="false" />
                            <b:message for="@previous" />
                            <b:inputText span="2" value="#{pedidoMB.endereco.logradouro}" label="Logradouro" size="30" required="false" />
                            <b:message for="@previous" />
                            <b:inputText span="2" value="#{pedidoMB.endereco.bairro}" label="Bairro" size="30" required="false" />
                            <b:message for="@previous" />
                            <b:inputText span="2" value="#{pedidoMB.endereco.cep}" label="CEP" size="30" required="false" />
                            <b:message for="@previous" />
                            <b:inputText span="2" value="#{pedidoMB.endereco.complemento}" label="Complemento" size="30" required="false" />
                            <b:message for="@previous" />

                        </div>

                        <div>
                            <h3>Itens da Vendas</h3>


                            <!--                            <b:button onclick="$('.responsiveModalPseudoClass').modal('show')" value="Adicionar Item"/>
                                                        <b:modal title="Item" styleClass="responsiveModalPseudoClass"
                                                                 closable="true"
                                                                 closeOnEscape="false">-->
                            <b:form>
                                <b:selectOneMenu id="produto"
                                                 value="#{pedidoMB.produto}" 
                                                 required="true"
                                                 label="Referencia"
                                                 span="2"
                                                 select2="true"
                                                 >
                                    <f:selectItem itemLabel="Produto" />
                                    <f:selectItems value="#{pedidoMB.produtos}"
                                                   var="produto" 
                                                   itemLabel="#{produto.referencia}"
                                                   itemValue="#{produto}"
                                                   />
                                    <f:ajax event="change" render="nomeProduto"/>
                                    <f:ajax event="change" render="numeracao"/>
                                </b:selectOneMenu>
                                <b:message for="@previous" />

                                <b:inputText id="nomeProduto" readonly="true" value="#{pedidoMB.produto.descricao}" label="Produto" size="30" span="5" />
                                <b:message for="@previous" />



                                <b:inputText id="preco"  value="#{pedidoMB.itemPedido.preco}" label="Preço" size="2" span="1" />
                                <b:message for="@previous" />
                                <b:inputText id="frete"  value="#{pedidoMB.itemPedido.frete}" label="Valor Frete" size="2" span="1" />
                                <b:message for="@previous" />



                                <b:selectOneMenu id="numeracao"
                                                 value="#{pedidoMB.produtoGrade}" 
                                                 required="true"
                                                 label="Numeração"
                                                 span="2"
                                                 >
                                    <f:selectItem itemLabel="Numero" />
                                    <f:selectItems value="#{pedidoMB.produtosGrade}"
                                                   var="produtoGrade" 
                                                   itemLabel="#{produtoGrade.numeracao}"
                                                   itemValue="#{produtoGrade}"
                                                   />

                                </b:selectOneMenu>
                                <b:message for="@previous" />

                                <b:inputText id="quantidade"  value="#{pedidoMB.gradeVenda.quantidade}" label="Quantidade" size="2" span="1" />
                                <b:message for="@previous" />


                                <b:commandButton look="primary" value="Adicionar" action="#{pedidoMB.adicionarGrade()}" icon-awesome="plus-square"/>

                                <b:dataTable 
                                    id="gradeNumeros"
                                    columnVisibility="false"
                                    value="#{pedidoMB.gradeVendas}"
                                    var="gradeVenda"
                                    select="true"
                                    selectionMode="single"
                                    searching ="false"
                                    paginated="false"
                                    info="false"
                                    >

                                    <b:dataTableColumn value="#{gradeVenda.grade.produto.referencia}" label="Referencia" />
                                    <b:dataTableColumn value="#{gradeVenda.grade.produto.descricao}" label="Descrição" />
                                    <b:dataTableColumn value="#{gradeVenda.grade.numeracao}" label="Numero" />
                                    <b:dataTableColumn value="#{gradeVenda.quantidade}" label="Quantidade" />


                                </b:dataTable>
                                <b:message for="@previous" />




                                <b:commandButton look="primary" value="Adicionar" action="#{pedidoMB.adicionarItem()}" icon-awesome="plus-square" />
                                <b:message for="@previous" />


                            </b:form>
                            <!--                            </b:modal>-->

                            <b:dataTable  columnVisibility="false"
                                          value="#{pedidoMB.itens}"
                                          var="itemPedido"
                                          select="true"
                                          selectionMode="single"
                                          searching ="false"
                                          paginated="false"
                                          info="false"
                                          >

                                <b:dataTableColumn value="#{pedidoMB.itemPedido.preco}" label="Item" />


                            </b:dataTable>
                        </div>
                        <b:commandButton look="primary" value="Salvar" action="#{pedidoMB.salvar()}" icon-awesome="save" />
                    </b:form>

                </h:panelGroup>
            </b:jumbotron>

        </ui:define>
    </ui:composition>

</html>
